<?phpnamespace app\controllers;use Yii;use app\models\WorkAddForm;use app\models\WorkAddimgForm;use app\models\WorkbasicinfoSearch;use yii\web\Controller;use yii\web\NotFoundHttpException;use yii\filters\VerbFilter;use app\helpers\Tool;class WorkController extends Controller{	//添加作品	public function actionAddwork(){				$model = new WorkAddForm;				$session = Yii::$app->session;				$post = Yii::$app->request->post();				if( empty($session['user'])|| $session['user']['id'] != $post['WorkAddForm']['makerid'] )		{			return Tool::return_json( false, 'makerid', '登录过期，请重新登录后发布' );		}				if( empty($_FILES['image']['name']) ){			return Tool::return_json( false, 'image', '请选择标题图片' );		}				if ($model->load($post) && $model->validate()) {			$model->image = $_FILES['image'];			return $model->addwork();		} else {			//回馈到ajax的错误数组			return Tool::return_json( false, $model->getFirstErrors() );        }	}		//添加作品展示图	public function actionAddworkimg(){				$model = new WorkAddimgForm;				$session = Yii::$app->session;				$post = Yii::$app->request->post();				if( empty($session['user'])|| $session['user']['id'] != $post['WorkAddimgForm']['makerid'] )		{			return Tool::return_json( false, 'makerid', '登录过期，请重新登录后发布' );		}				if( count($_FILES)<1 ){			return Tool::return_json( false, 'img', '图片上传失败' );		}		if ($model->load($post) && $model->validate()) {			$model->imglist = $_FILES;			return $model->addWorkimg();		} else {			//回馈到ajax的错误数组			return Tool::return_json( false, $model->getFirstErrors() );        }	}		//查询作品	public function actionSearch()	{		$model = new WorkbasicinfoSearch;				$data = array();		$data = $_POST + $_GET;				if( empty($data) ){			return Tool::return_json( false, 'data', '筛选条件为空，无法查询' );		}				if ($model->load($data) && $model->validate()) {			return $model->search();		} else {			//回馈到ajax的错误数组			return Tool::return_json( false, $model->getFirstErrors() );        }	}}